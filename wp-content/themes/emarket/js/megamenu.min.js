var e;(e=jQuery).fn.megamenu=function(t){t=jQuery.extend({wrap:".nav-mega",speed:0,rtl:!1,mm_timeout:0},t);var n=e(this);function i(i,l){menucontent=e(i).find(".dropdown-menu"),menuitemlink=e(i).find(".item-link"),menuitemlink_offset=menuitemlink.offset(),menucontentinner=e(i).find(".nav-level1"),mega_full=!!e(i).hasClass("megamenu-full"),wrap_O=0==t.rtl?n.offset().left:e(window).width()-(n.offset().left+n.outerWidth()),wrap_W=n.outerWidth(),menu_parent=menuitemli_O=0==t.rtl?e(i).offset().left:e(window).width()-(e(i).offset().left+e(i).outerWidth()),menuitemli_W=e(i).outerWidth(),menuitemlink_H=menuitemlink.outerHeight(),menuitemlink_W=menuitemlink.outerWidth(),menuitemlink_O=0==t.rtl?menuitemlink_offset.left:e(window).width()-(menuitemlink_offset.left+menuitemlink.outerWidth()),menucontent_W=menucontent.outerWidth();var m=wrap_O+wrap_W,a=menuitemlink_O+menucontent_W,s=!!(e(i).hasClass("shop-emarket")||e(i).hasClass("blog-emarket")||e(i).hasClass("promotions-emarket")||e(i).hasClass("special-emarket"));if(mega_full||s){var u=menuitemlink_O-wrap_O;0==t.rtl?menucontent.css({left:"-"+u+"px",width:wrap_W+"px"}):menucontent.css({left:"auto",right:-u+"px",width:wrap_W+"px"})}else a>=m&&((u=m-a+menuitemlink_O-menuitemli_O)>wrap_O&&(u=wrap_O-menuitemlink_O),0==t.rtl?u>wrap_O?menucontent.css({left:u+"px",width:wrap_W+"px"}):menucontent.css({left:u+"px"}):u>wrap_O?menucontent.css({left:"auto",right:u+"px",width:wrap_W+"px"}):menucontent.css({left:"auto",right:u+"px"}))}n.find(".emarket-mega > li").each((function(){e(this).find(".dropdown-menu"),e(this).find(".item-link:first"),e(this).find(".nav-level1");var t=e(this),n=(t.hasClass("level1"),!!t.hasClass("dropdown"));n&&(e("body").hasClass("menu-click")?(t.on("click",(function(){i(t),e(this).find(">ul").toggleClass("visible")})),e(document).mouseup((function(e){var n=t.find(">ul");n.is(e.target)||0!==n.has(e.target).length||n.removeClass("visible")})),t.find('> a[data-toogle="dropdown"]').on("click",(function(e){e.preventDefault()}))):t.mouseenter((function(e){t.find(">ul").addClass("visible"),n&&i(t)})).mouseleave((function(e){t.find(">ul").removeClass("visible")})))}))},e(document).on("ready",(function(){var t=e("body").hasClass("rtl");e(".header-mid").megamenu({wrap:".nav-mega",justify:"left",rtl:t}),e(".header-bottom").megamenu({wrap:".nav-mega",justify:"left",rtl:t})}));